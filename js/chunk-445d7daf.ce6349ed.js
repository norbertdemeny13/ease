(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-445d7daf"],{1325:function(e,t,s){"use strict";s("df28")},"14af":function(e,t,s){"use strict";s("4c30")},"422f":function(e,t,s){"use strict";s("e9c1")},"4b61c":function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"es-payment-container"},[s("h5",[e._v(e._s(e.$t("generic.address")))]),e.getLocalAddresses.length?s("div",[s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"my-2 form-group"},[s("div",{staticClass:"custom_select submit"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.getSelectedAddress,expression:"getSelectedAddress"}],staticClass:"form-control wide",attrs:{id:"address",name:"address"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.getSelectedAddress=t.target.multiple?s:s[0]}}},e._l(e.getLocalAddresses,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.label)+" ")])})),0)])])])])]):s("div",{staticClass:"my-4"},[s("p",[e._v(e._s(e.$t("generic.please_add_an_address")))])]),s("div",{staticClass:"my-4"},[s("a",{staticClass:"my-4",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.$emit("on-show-address-modal")}}},[s("i",{staticClass:"icon_plus"}),e._v(" "+e._s(e.$t("generic.add_address"))+" ")])])])},r=[],a=(s("99af"),s("4de4"),s("7db0"),s("d81d"),s("b0c0"),s("5530")),n=s("2b0e"),c=s("2f62"),o=n["default"].extend({name:"es-address-details",data:function(){return{selectedAddress:0}},computed:Object(a["a"])(Object(a["a"])({},Object(c["c"])({getAddresses:"address/getAddresses",getReservationAddress:"address/getReservationAddress",getDefaultAddress:"session/getUserDefaultAddress"})),{},{getSelectedAddress:{get:function(){return this.selectedAddress},set:function(e){var t=this.$router.currentRoute.name;if(this.selectedAddress=e,this.setReservationAddress(e),"Plata rezervare"===t){var s=this.getAddresses.find((function(t){return t.id===e}));this.createReservationAddress({address:s})}}},getLocalAddresses:function(){var e=this.getAddresses,t=this.selectedAddress,s=e.find((function(e){return e.id===t})),i="Plata rezervare"===this.$router.currentRoute.name,r=s&&i;return e&&e.filter((function(e){var t=e.city;return!r||t.id===s.city.id})).map((function(e){var t=e.street_name,s=e.street_number,i=e.city,r=e.id,a="".concat(s,", ").concat(t,", ").concat(i.name);return{id:r,label:a}}))}}),created:function(){this.fetchAddresses()},watch:{getAddresses:function(e){if(e.length){var t=this.getReservationAddress?this.getReservationAddress.id:e.find((function(e){return e.main})).id;this.selectedAddress=t,this.setReservationAddress(t)}}},methods:Object(a["a"])({},Object(c["b"])({fetchAddresses:"address/fetchAddresses",setReservationAddress:"address/setReservationAddress",createReservationAddress:"services/setReservationAddress"}))}),d=o,l=s("2877"),u=Object(l["a"])(d,i,r,!1,null,null,null),v=u.exports},"4c30":function(e,t,s){},"598c":function(e,t){e.exports="data:image/png;base64,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"},"6a5d":function(e,t,s){"use strict";s.d(t,"a",(function(){return x})),s.d(t,"b",(function(){return D}));var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"es-payment-container"},[s("div",{staticClass:"box_order_form"},[s("div",{staticClass:"head"},[s("div",{staticClass:"title"},[s("h3",[e._v(e._s(e.$t("generic.add_payment_method")))])])]),s("div",{staticClass:"main p-4"},[s("div",{staticClass:"card-element-container p-4"},[e.localIsFetching?s("div",{staticClass:"d-flex justify-content-between"},[s("es-skeleton-item",{attrs:{heigth:"18px",width:"40%"}}),s("es-skeleton-item",{attrs:{heigth:"18px",width:"25%"}})],1):e._e(),s("div",{ref:"card-element",style:{opacity:e.localIsFetching?0:1,heigth:e.localIsFetching?0:"auto"},attrs:{id:"card-element"}})]),s("div",{staticClass:"payment-actions"},[s("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.onAddCard(t)}}},[e._v(" "+e._s(e.$t("generic.save"))+" ")]),s("a",{staticClass:"ml-4",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.$emit("on-cancel")}}},[e._v(" "+e._s(e.$t("generic.back"))+" ")])])])])])},r=[],a=(s("96cf"),s("1da1")),n=s("5530"),c=s("2b0e"),o=s("2f62"),d="https://js.stripe.com/v3",l=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,u="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",v=function(){for(var e=document.querySelectorAll('script[src^="'.concat(d,'"]')),t=0;t<e.length;t++){var s=e[t];if(l.test(s.src))return s}return null},p=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(d).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(s),s},m=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.12.1",startTime:t})},f=null,g=function(e){return null!==f||(f=new Promise((function(t,s){if("undefined"!==typeof window)if(window.Stripe&&e&&console.warn(u),window.Stripe)t(window.Stripe);else try{var i=v();i&&e?console.warn(u):i||(i=p(e)),i.addEventListener("load",(function(){window.Stripe?t(window.Stripe):s(new Error("Stripe.js not available"))})),i.addEventListener("error",(function(){s(new Error("Failed to load Stripe.js"))}))}catch(r){return void s(r)}else t(null)}))),f},h=function(e,t,s){if(null===e)return null;var i=e.apply(void 0,t);return m(i,s),i},b=Promise.resolve().then((function(){return g(null)})),_=!1;b["catch"]((function(e){_||console.warn(e)}));var C=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];_=!0;var i=Date.now();return b.then((function(e){return h(e,t,i)}))},y=c["default"].extend({name:"es-payment",props:{isFetching:Boolean,isAuthenticated:Boolean},data:function(){return{publicKey:"",clientSecret:"",onPayClientSecret:"",stripe:null,card:null,isCardMounted:!1,localCard:null}},created:function(){this.fetchGiftCardPaymentSetup()},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])({getPaymentSetup:"giftCards/getPaymentSetup",getCardInfo:"cards/getCardInfo"})),{},{localIsFetching:function(){return this.isFetching||!this.isCardMounted}}),watch:{getPaymentSetup:function(e){e&&(this.clientSecret=e.clientSecret,this.publicKey=e.publicKey,this.setStripe(e))},getCardInfo:function(e){e&&(this.clientSecret=e.clientSecret,this.publicKey=e.publicKey,this.setStripe(e))}},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])({fetchGiftCardPaymentSetup:"giftCards/fetchGiftCardPaymentSetup",setStripeCard:"cards/setStripeCard",setSelectedCard:"cards/setSelectedCard"})),{},{setStripe:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var i,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i=e.publicKey,e.clientSecret,s.next=3,C(i);case 3:t.stripe=s.sent,r={base:{iconColor:"#666ee8",color:"#31325f",fontWeight:400,fontSmoothing:"antialiased",fontSize:"15px","::placeholder":{color:"#aab7c4"},":-webkit-autofill":{color:"#666ee8"}}},t.card=t.stripe.elements().create("card",{hidePostalCode:!0,style:r}),t.card.mount("#card-element"),t.card.on("ready",(function(e){t.isCardMounted=!0}));case 8:case"end":return s.stop()}}),s)})))()},createToken:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.stripe.createToken(e.card).then((function(t){if(t.error)e.$toasts.toast({title:e.$t("toast.error_title"),id:"card",message:t.error.message,intent:"error"});else{var s=t.token,i=s.card,r=s.id;e.setStripeCard(Object(n["a"])(Object(n["a"])({},i),{},{token_id:r})),e.localCard=Object(n["a"])(Object(n["a"])({},i),{},{token_id:r}),e.cardSetup()}}));case 2:case"end":return t.stop()}}),t)})))()},cardSetup:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.stripe.confirmCardSetup(e.clientSecret,{payment_method:{card:e.card}}).then((function(t){t.error?e.$toasts.toast({title:e.$t("toast.error_title"),id:"card",message:t.error.message,intent:"error"}):(e.setSelectedCard(e.localCard),e.$emit("on-add-card",e.localCard))}));case 2:case"end":return t.stop()}}),t)})))()},onAddCard:function(){this.createToken()}})}),S=y,A=(s("1325"),s("2877")),w=Object(A["a"])(S,i,r,!1,null,null,null),x=w.exports,R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"es_payment-details-container"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.showAddPayment,expression:"!showAddPayment"}]},[s("h5",[e._v(e._s(e.$t("generic.payment_method")))]),e.getLocalCards.length?s("div",[s("p",[e._v(e._s(e.$t("generic.select_payment_method")))]),s("div",{staticClass:"row mb-4"},[s("div",{staticClass:"col-6"},[s("div",{staticClass:"my-2 form-group"},[s("div",{staticClass:"custom_select submit"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.getSelectedCard,expression:"getSelectedCard"}],staticClass:"form-control wide",attrs:{name:"credit-card",id:"credit-card"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.getSelectedCard=t.target.multiple?s:s[0]}}},e._l(e.getCards,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(" 💳 ⠀ "+e._s(t.brand.toUpperCase())+" **** "+e._s(t.last4)+" ")])})),0)])])])])]):e._e(),s("a",{staticClass:"mt-4",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.addPayment()}}},[s("i",{staticClass:"icon_plus"}),e._v(" "+e._s(e.$t("generic.add_new_payment_method"))+" ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showAddPayment,expression:"showAddPayment"}]},[s("h5",[e._v(e._s(e.$t("generic.add_new_payment_method")))]),s("es-payment",{staticClass:"mt-4",attrs:{"is-fetching":e.isFetching,"is-authenticated":!!e.isAuthenticated},on:{"on-add-card":e.onAddCard,"on-cancel":function(t){e.showAddPayment=!1}}})],1),e._t("default")],2)},j=[],O=(s("7db0"),s("4160"),s("159b"),s("e1bd")),k=c["default"].extend({name:"es-payment-detail-view",components:{"es-payment":x},data:function(){return{showAddPayment:!1,selectedCard:null,isSubscriptionActivated:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])({getSelectedSubscription:"subscriptions/getSelectedSubscription",getErrors:"subscriptions/getErrors",getCards:"cards/getCards",getStripeCards:"cards/getStripeCards",isAuthenticated:"session/isAuthenticated",isFetching:"cards/isFetching"})),{},{getLocalCards:function(){return this.isAuthenticated?this.getCards:this.getStripeCards},getSelectedCard:{get:function(){return this.selectedCard},set:function(e){var t=this.getLocalCards.find((function(t){return t.id===e}));this.setSelectedCard(t)}}}),watch:{getCards:function(e){if(e&&e.length){var t=e[e.length-1];this.selectedCard=t.id,this.setSelectedCard(t)}},getErrors:function(e){var t=this;e.length&&e.forEach((function(e){t.$toasts.toasts.push({title:t.$t("toast.error_title"),intent:400===e.status?"error":"warning",message:e.data.error,id:Object(O["a"])()})}))}},created:function(){this.isAuthenticated&&this.fetchCards()},destroyed:function(){window.destroyCustomSelect(),this.removeStripeCards()},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])({fetchCards:"cards/fetchCards",setSelectedCard:"cards/setSelectedCard",removeStripeCards:"cards/removeStripeCards",addCard:"cards/addCard"})),{},{onAddCard:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t.isAuthenticated){s.next=3;break}return s.next=3,t.fetchCards();case 3:t.selectedCard=e.id,t.setSelectedCard(e),t.showAddPayment=!1;case 6:case"end":return s.stop()}}),s)})))()},addPayment:function(){this.isAuthenticated&&this.addCard(),this.showAddPayment=!0}})}),P=k,B=Object(A["a"])(P,R,j,!1,null,null,null),D=B.exports},a8f2:function(e,t,s){"use strict";s.r(t),s.d(t,"ReserveServicePayment",(function(){return P}));var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"es_reserve-service-container"},[s("div",{staticClass:"container margin_30_40"},[e.isReservationConfirmed?e._e():s("router-link",{staticClass:"back-button mb-2",attrs:{to:e.getToRoute()}},[e._v("Inapoi")]),s("div",{staticClass:"row mt-4"},[s("div",{staticClass:"col-lg-6 col-md-6 pt-2 p-4 bg_gray"},[e.isReservationConfirmed?s("div",{staticClass:"d-flex flex-column align-items-center"},[s("div",{staticClass:"title d-flex flex-column align-items-center"},[e._m(0),s("h3",{staticClass:"px-10 text-center"},[e._v(e._s(e.$t("reservation_sent_successfully")))])]),s("p",{staticClass:"my-6 px-8"},[e._v(e._s(e.$t("reservation_sent_successfully_text"))+" ")]),s("div",{staticClass:"d-flex justify-content-center"},[s("button",{staticClass:"btn btn-sm btn-pink btn-pill mt-4 px-6",on:{click:function(t){return t.preventDefault(),e.$router.push("/client/rezervarile-mele")}}},[e._v(" "+e._s(e.$t("generic.my_reservations"))+" ")])])]):s("div",[e.getCards.length?e._e():s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("span",[e._v(e._s(e.$t("generic.please_add_a_payment_method")))])]),s("es-address-details",{on:{"on-show-address-modal":function(t){e.isAddressModalOpen=!0}}}),s("es-payment-details"),s("es-subscription-selection",{on:{"set-active-subscription":e.setActiveSubscription}})],1)]),s("div",{staticClass:"col-lg-6 col-md-6"},[s("es-reservation-summary",{attrs:{date:e.getSelectedDate,time:e.getSelectedTime,"is-reservation-confirmed":e.isReservationConfirmed}}),e.isReservationConfirmed?e._e():s("div",{staticClass:"d-flex my-4 justify-content-center"},[s("button",{staticClass:"btn btn-sm btn-pink btn-pill px-6",attrs:{disabled:!e.getCards.length},on:{click:function(t){return t.preventDefault(),e.onPay()}}},[e._v(" "+e._s(e.$t("summary.sendReservation"))+" ")])])],1)])],1),e.isAddressModalOpen?s("es-address-modal",{attrs:{"is-massage-view":e.isMassageView},model:{value:e.isAddressModalOpen,callback:function(t){e.isAddressModalOpen=t},expression:"isAddressModalOpen"}}):e._e()],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("figure",[i("img",{staticClass:"lazy",attrs:{src:s("598c"),alt:""}})])}],a=(s("99af"),s("96cf"),s("1da1")),n=s("5530"),c=s("2b0e"),o=s("2f62"),d=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"ml-2 box_order"},[s("div",{staticClass:"head"},[s("h3",[e._v(e._s(e.$t("lbl_reservation_summary")))])]),s("div",{staticClass:"main"},[s("ul",[s("li",[e._v(e._s(e.$t("generic.date"))),s("span",[e._v(e._s(e.getDate))])]),s("li",[e._v(e._s(e.$t("generic.hour"))),s("span",[e._v(e._s(e.getHour))])])]),s("ul",[e.isCoupleMassage?s("li",{staticClass:"d-flex justify-content-between"},[s("strong",[e._v(e._s(e.$t("generic.couple_massage"))+" "+e._s(e.selectedReservation.reservation_service.massage_one.service.duration)+" min")]),s("span",[e._v(e._s(e.selectedReservation.reservation_service.price+" Lei"))])]):e._e(),e._l(e.reservationServices,(function(t,i){return[e.reservationServices.length>1?s("li",{key:i},[e._v("Serviciu "+e._s(i+1))]):e._e(),s("li",{key:t.id+"-summary",staticClass:"d-flex justify-content-between"},[s("strong",[e._v(e._s(e.$t(t.name)))]),e.isCoupleMassage?e._e():s("span",[e._v(e._s(t.price+" Lei"))])]),e._l(t.complementaryServices,(function(i){return s("li",{key:i.id+"-"+t.id,staticClass:"d-flex justify-content-between ml-4"},[s("strong",[e._v(e._s(i.name))]),e._v(" "),s("span",[e._v(e._s(i.price+" Lei"))])])})),t.therapeuticForm&&parseInt(t.therapeuticForm.price,10)>0?s("li",{key:t.therapeuticForm.id,staticClass:"d-flex justify-content-between ml-4"},[s("strong",[e._v(e._s(t.therapeuticForm.name))]),e._v(" "),s("span",[e._v(e._s(t.therapeuticForm.price+" Lei"))])]):e._e()]})),s("es-divider"),s("li",{staticClass:"d-flex justify-content-between"},[s("strong",[e._v(e._s(e.$t("bookings.details.subTotal")))]),e._v(" "+e._s(e.selectedReservation.total+" Lei"))]),parseInt(e.selectedReservation.subscription_service_discount,10)>0?s("li",{staticClass:"d-flex justify-content-between"},[s("strong",[e._v("Numele abonamentului activ")]),e._v(" - "+e._s(e.selectedReservation.subscription_service_discount+" Lei"))]):e._e(),parseInt(e.selectedReservation.subscription_discount,10)>0?s("li",{staticClass:"d-flex justify-content-between"},[s("strong",[e._v(" "+e._s(e.$t("summary.subscriptionDiscount")))]),e._v(" - "+e._s(e.selectedReservation.subscription_discount+" Lei"))]):e._e(),parseInt(e.selectedReservation.promo_code_discount,10)>0?s("li",{staticClass:"d-flex justify-content-between"},[s("strong",[e._v(e._s(e.$t("summary.promo_code")))]),e._v(" - "+e._s(e.selectedReservation.promo_code_discount+" Lei"))]):e._e(),parseInt(e.selectedReservation.gift_card_discount,10)>0?s("li",{staticClass:"d-flex justify-content-between"},[s("strong",[e._v(e._s(e.$t("generic.gift_card")))]),e._v(" - "+e._s(e.selectedReservation.gift_card_discount+" Lei"))]):e._e(),parseInt(e.selectedReservation.ease_credit_used,10)>0?s("li",{staticClass:"d-flex justify-content-between"},[s("strong",[e._v(e._s(e.$t("summary.easeCredit")))]),e._v(" - "+e._s(e.selectedReservation.ease_credit_used+" Lei"))]):e._e(),s("li",{staticClass:"total d-flex justify-content-between"},[s("strong",[e._v(e._s(e.$t("summary.total")))]),e._v(" "+e._s(e.selectedReservation.to_pay+" Lei"))]),e.isReservationConfirmed?e._e():s("es-divider"),e.isReservationConfirmed?e._e():s("div",{staticClass:"promo-code-container"},[s("div",{staticClass:"form-group col-md-8"},[s("label",[e._v(e._s(e.$t("summary.add_promo_code_or_giftcard")))]),s("div",{staticClass:"d-flex align-items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.promoCode,expression:"promoCode"}],staticClass:"form-control",attrs:{id:"promo",type:"text",name:"promo"},domProps:{value:e.promoCode},on:{input:function(t){t.target.composing||(e.promoCode=t.target.value)}}}),s("div",{staticClass:"ml-4"},[s("a",{staticClass:"my-4",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.activatePromo({promoCode:e.promoCode})}}},[e._v(" "+e._s(e.$t("summary.apply"))+" ")])])])])])],2)])])},l=[],u=(s("caad"),s("d81d"),s("b0c0"),s("a9e3"),s("2532"),s("32e8")),v=s("4010"),p=c["default"].extend({name:"es-reservation-summary",props:{date:{type:Object,required:!0},time:{type:Object,required:!0},isReservationConfirmed:{default:!1,type:Boolean}},data:function(){return{hourPrice:0,promoCode:"",selectedReservation:null}},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])({getReservationDetails:"services/getReservationDetails"})),{},{getDate:function(){var e,t=null===(e=this.date)||void 0===e?void 0:e.date;return t?Object(v["e"])(t):""},getHour:function(){var e=this.time.time;return e},isCoupleMassage:function(){return this.selectedReservation.reservation_service_type.includes("CoupleMassageReservation")},reservationServices:function(){var e=this.selectedReservation.reservation_service_type,t=this.selectedReservation.reservation_service;if("BeautyReservation"===e){var s=t.beauty_service_reservations,i=s.map((function(e){return{name:e.service.name,price:e.price,id:e.id,complementaryServices:e.complementary_services.map((function(e){return{name:e.complementary_service.name,price:e.price,id:e.id}}))}}));return i}if("CoupleMassageReservation"===e){var r=new Number(t.massage_one.therapeutic_form.price||0),a=new Number(t.massage_two.therapeutic_form.price||0),n={name:t.massage_one.service.name,price:t.massage_one.price,id:t.massage_one.id,complementaryServices:t.massage_one.complementary_massages.map((function(e){return{name:e.name,price:e.price,id:e.id}})),therapeuticForm:r>0?{name:t.massage_one.therapeutic_form.name,price:t.massage_one.therapeutic_form.price}:null},c={name:t.massage_two.service.name,price:t.massage_two.price,id:t.massage_two.id,complementaryServices:t.massage_two.complementary_massages.map((function(e){return{name:e.name,price:e.price,id:e.id}})),therapeuticForm:a>0?{name:t.massage_two.therapeutic_form.name,price:t.massage_two.therapeutic_form.price}:null};return[n,c]}if("MassageReservation"===e){var o={name:t.service.name,price:t.price,id:t.id,complementaryServices:t.complementary_massages.map((function(e){return{name:e.name,price:e.price,id:e.id}})),therapeuticForm:t.therapeutic_form};return[o]}if("FitnessReservation"===e){var d={name:t.service.name,price:t.price,id:t.id};return[d]}return t}}),created:function(){this.selectedReservation=this.getReservationDetails},watch:{getReservationDetails:function(e,t){Object(u["a"])(e,t)||(this.selectedReservation=e)}},methods:Object(n["a"])({},Object(o["b"])({activatePromo:"services/activatePromo"}))}),m=p,f=(s("14af"),s("2877")),g=Object(f["a"])(m,d,l,!1,null,null,null),h=g.exports,b=s("6a5d"),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"es-subscription-selection-container py-4 pr-12"},[e.hasActiveSubscription?s("div",{staticClass:"row"},[s("div",{staticClass:"col-8"},[e.getSubscription?s("div",{staticClass:"active-subscription d-flex justify-content-between align-items-center py-4 px-4"},[s("h6",[e._v(e._s("Ab. "+e.getSubscription.name+" "+(e.getSubscription.monthly?"lunar":"anual"))+" ("+e._s(e.getActiveSubscription().uses_left)+")")]),s("h6",[e._v(e._s("active"===e.getSelectedSubscription.state?"Activ":"Anulat"))])]):e._e()])]):e.hasSubscription?s("div",[s("div",{staticClass:"col-8"},[s("div",{staticClass:"active-subscription d-flex justify-content-between align-items-center py-4 px-4"},[s("h6",[e._v(e._s("Ab. "+e.getAvailableSubscription.name+" "+(e.getAvailableSubscription.monthly?"lunar":"anual")))]),s("h6",[e._v(e._s("active"===e.getSelectedSubscription.state?"Activ":"Anulat"))])])])]):s("div",[s("div",{staticClass:"my-2"},[s("h5",[e._v(e._s(e.$t("activate_subscription")))]),s("p",{staticClass:"my-2"},[e._v(e._s(e.$t("activate_subscription_for_discount")))]),s("div",{staticClass:"d-flex flex-column"},e._l(e.getSubscriptions,(function(t){return s("div",{key:t.id,staticClass:"pricing-card-small mb-4"},[s("div",{staticClass:"card-body",on:{click:function(s){return s.preventDefault(),e.onSubscriptionSelect(t)}}},[s("h3",{staticClass:"pricing-plan-title d-flex align-items-center"},[s("span",{staticClass:"badge badge-pill offer-badge mr-auto"},[e._v(e._s(t.discount)+" %")])]),s("div",{staticClass:"d-flex justify-content-between mt-4 mb-2"},[s("div",[s("h6",[e._v(e._s(e.$t(t.name)))]),s("div",{staticClass:"d-flex flex-column"},e._l(t.small_descriptions,(function(t,i){return s("span",{key:i},[e._v(e._s(e.$t(t)))])})),0)]),s("div",{staticClass:"d-flex flex-column"},[s("h6",{staticClass:"bold"},[e._v(e._s(t.price.price+" Lei"))]),s("span",[e._v(e._s(t.monthly?"pe luna":"pe an"))])])])])])})),0)])])])},C=[],y=(s("4de4"),s("b64b"),s("498a"),c["default"].extend({name:"es-subscription-selection",data:function(){return{activeSubscription:null,availableSubscription:null,subscriptionType:""}},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])({getSelectedSubscription:"subscriptions/getActiveSubscription",getActiveSubscriptions:"subscriptions/getActiveSubscriptions",getSubscriptions:"subscriptions/getSubscriptions",getServiceById:"services/getServiceById"})),{},{getSubscription:function(){var e;return null===(e=this.activeSubscription)||void 0===e?void 0:e.subscription},getAvailableSubscription:function(){var e;return null===(e=this.availableSubscription)||void 0===e?void 0:e.subscription},hasActiveSubscription:function(){return!!this.getActiveSubscription()},hasSubscription:function(){var e=this.getActiveSubscriptions;return e&&!!Object.keys(e).filter((function(t){return e[t]})).length}}),created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.getServiceById.type,s.includes("Beauty")?e.subscriptionType="beauty":s.includes("Fitness")?e.subscriptionType="fitness":e.subscriptionType="massages",e.setServiceCategory(e.subscriptionType),t.next=5,e.fetchSubscriptionsByType(e.subscriptionType);case 5:return t.next=7,e.fetchActiveSubscriptions();case 7:case"end":return t.stop()}}),t)})))()},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])({fetchActiveSubscriptions:"subscriptions/fetchActiveSubscriptions",fetchSubscriptionsByType:"subscriptions/fetchSubscriptionsByType",setSubscription:"subscriptions/setSubscription",setActivePayment:"services/setActivePayment",setServiceCategory:"services/setServiceCategory"})),{},{getActiveSubscription:function(){var e="massages"===this.subscriptionType?"massage":this.subscriptionType,t=this.getActiveSubscriptions,s=t&&t[e],i=t&&Object.keys(t).filter((function(e){return t[e]})),r=!!i&&t[i];return s?(this.activeSubscription=s,this.$emit("set-active-subscription",s)):r&&(this.availableSubscription=r,this.$emit("set-active-subscription",r)),s},onSubscriptionSelect:function(e){this.setSubscription(Object(n["a"])(Object(n["a"])({},e),{},{label:"".concat(e.name," ").concat(e.uses>1?e.uses:"").trim(),price:e.price.price})),this.setActivePayment(!0),this.$router.push("/abonamente/rezerva")}})})),S=y,A=(s("422f"),Object(f["a"])(S,_,C,!1,null,null,null)),w=A.exports,x=s("bd42"),R=s("4b61c"),j=c["default"].extend({name:"es-reserve-service-payment",components:{"es-address-details":R["a"],"es-address-modal":x["a"],"es-reservation-summary":h,"es-payment-details":b["b"],"es-subscription-selection":w},data:function(){return{activeSubscription:null,isAddressModalOpen:!1,isMassageView:null,isReservationConfirmed:!1}},computed:Object(n["a"])({},Object(o["c"])({getAddresses:"address/getAddresses",getCards:"cards/getCards",getSelectedCard:"cards/getSelectedCard",getReservationDetails:"services/getReservationDetails",getServiceById:"services/getServiceById",getSelectedTime:"services/getSelectedTime",getSelectedDate:"services/getSelectedDate",isAuthenticated:"session/isAuthenticated"})),watch:{getReservationDetails:function(e){"waiting_confirmation"===e.status&&(this.isReservationConfirmed=!0,window.scroll({top:0,left:0,behavior:"smooth"}))}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.$router.currentRoute.params.type,e.isMassageView="single"===s||"couple"===s,t.next=4,e.fetchAddresses();case 4:case"end":return t.stop()}}),t)})))()},methods:Object(n["a"])(Object(n["a"])({},Object(o["b"])({payServiceReservation:"services/payServiceReservation",fetchCards:"cards/fetchCards",fetchAddresses:"address/fetchAddresses",createReservation:"services/createReservation",createExtraServiceReservation:"services/createExtraServiceReservation"})),{},{getToRoute:function(){var e=this.$router.currentRoute.params,t=e.id,s=e.type;return this.isMassageView?"/servicii/masaj?type=".concat(s):"/servicii/".concat(s,"/").concat(t,"/rezerva")},onPay:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.getSelectedCard.payment_method_id,e.getAddresses.length){t.next=5;break}return e.isAddressModalOpen=!0,e.$toasts.toast({id:"address-toast",title:e.$t("toast.warning_title"),message:e.$t("toast.no_address")}),t.abrupt("return");case 5:if(e.getReservationDetails){t.next=10;break}return t.next=8,e.createReservation();case 8:return t.next=10,e.createExtraServiceReservation();case 10:if(s){t.next=13;break}return t.next=13,e.fetchCards();case 13:e.payServiceReservation();case 14:case"end":return t.stop()}}),t)})))()},setActiveSubscription:function(e){this.activeSubscription=e}})}),O=j,k=Object(f["a"])(O,i,r,!1,null,null,null),P=k.exports},df28:function(e,t,s){},e9c1:function(e,t,s){}}]);
//# sourceMappingURL=chunk-445d7daf.ce6349ed.js.map